const goRegister=document.querySelector("#goToRegister");goRegister.addEventListener("click",preventLink);const loginBtn=document.querySelector("#confirmBtn1");try{loginBtn.addEventListener("click",ajaxFunc)}catch{}const registerBtn=document.querySelector("#confirmBtn2");registerBtn.addEventListener("click",ajaxFunc1);const backTologin=document.querySelector("#goToLogin");try{backTologin.addEventListener("click",changeToLogin)}catch(e){}function preventLink(e){e.preventDefault();const t=document.querySelector(".loginPage");goRegister.removeEventListener("click",preventLink),t.style.display="none",document.querySelector(".regPage").style.display="grid",document.querySelector(".regPage").style.gridTemplateColumns="3fr 3fr 3fr",document.querySelector(".regPage").style.gridTemplateRows="25% 50% 25%",document.querySelector(".regPage").style.font="1.2em Verdana";document.querySelector("#goToLogin").addEventListener("click",changeToLogin)}function changeToLogin(e){e.preventDefault(),document.querySelector(".regPage").style.display="none",document.querySelector(".loginPage").style.display="grid",document.querySelector(".loginPage").style.gridTemplateColumns="3fr 3fr 3fr",document.querySelector(".loginPage").style.gridTemplateRows="3fr 5fr 3fr",document.querySelector(".loginPage").style.font="1.2em Verdana",document.querySelector("#goToLogin").removeEventListener("click",changeToLogin);document.querySelector("#goToRegister").addEventListener("click",preventLink)}function clientSideVal(e){for(const t in e){if(/\s/g.test(e[t]))return whiteSpace("err2"),!1;if(/[-$\%^\&\*(){}[\]"'\?\><,.\+=_@!#;\:|\\]/.test(e[t]))return invalidChar("err2"),!1;if(-1!=t.indexOf("User")&&(e[t].length<6||e[t].length>16))return tooShort("err2"),!1;if(-1!=t.indexOf("Pass")&&(e[t].length<6||e[t].length>32))return tooShort("err2"),!1;if(null===e[t]||e[t].length<=1)return regErrorMsg("something went wrong bitch"),!1}return!0}function tooShort(e){regErrorMsg("Entered Username or Password must be between 6-16 or 6-32 characters respectively")}function invalidChar(e){regErrorMsg("Invalid Characters: No Special Characters")}function whiteSpace(e){regErrorMsg("No spaces allowed")}function ajaxFunc1(e){const t=document.querySelector("#nUsername").value,r=document.querySelector("#nPass").value,n=document.querySelector("#rNPass").value;if(parameter={User:t,Pass:r,PassAgain:n},clientSideVal(parameter)){const e=new XMLHttpRequest;e.open("POST","./app.js"),e.onload=()=>{"true"===e.responseText?(document.querySelector(".successPage").style.display="block",document.querySelector(".regPage").style.display="none",document.querySelector("#confirmBtn2").removeEventListener("click",ajaxFunc1)):"diffPasswords"===e.responseText?regErrorMsg("Passwords don't match"):regErrorMsg("Username already taken"),clearTextboxes("nUsername","nPass","rNPass")};const o=document.querySelector("#csrf_token").attributes.content.textContent;e.send(JSON.stringify(new Array("register",t,r,n,o)))}}function regErrorMsg(e){document.querySelector("#err2").textContent=e;const t=document.querySelector("#nUsername"),r=document.querySelector("#nPass"),n=document.querySelector("#rNPass");t.addEventListener("click",regErrText1),r.addEventListener("click",regErrText2),n.addEventListener("click",regErrText3)}function regErrText1(){document.querySelector("#err2").textContent="",document.querySelector("#nUsername").removeEventListener("click",regErrText1)}function regErrText2(){document.querySelector("#err2").textContent="",document.querySelector("#nPass").removeEventListener("click",regErrText2)}function regErrText3(){document.querySelector("#err2").textContent="",document.querySelector("#rNPass").removeEventListener("click",regErrText3)}function ajaxFunc(e){e.preventDefault();const t=document.querySelector("#existUsername").value,r=document.querySelector("#existPass").value,n=new XMLHttpRequest;n.open("POST","../private/app.js"),n.setRequestHeader("Content-Type","application/json"),n.onload=()=>{"true"===n.responseText?document.location.href="MessageHTML.html":errorMsg(n),clearTextboxes("existUsername","existPass")};const o=document.querySelector("#csrf_token").attributes.content.textContent;n.send(JSON.stringify(new Array("login",t,r,o)))}function clearTextboxes(...e){for(const t of e)document.getElementById(t).value=""}function errorMsg(e){document.querySelector("#err1").textContent="The Username or Password provided does not match an existing account";const t=document.querySelector("#existUsername"),r=document.querySelector("#existPass");t.addEventListener("click",errText1),r.addEventListener("click",errText2)}function errText1(){document.querySelector("#err1").textContent="",document.querySelector("#existUsername").removeEventListener("click",errText1)}function errText2(){document.querySelector("#err1").textContent="",document.querySelector("#existPass").removeEventListener("click",errText2)}document.addEventListener("DOMContentLoaded",(e=>{let t=document.querySelector("body").children;for(let e=t.length-1;e>0;e--)if("position: static !important;"===t[e].style.cssText){t[e].remove();break}})),document.addEventListener("DOMContentLoaded",(()=>{let e=new XMLHttpRequest;e.open("POST","./app.js"),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(new Array("return"))),e.onload=()=>{let t=e.responseText.slice(e.responseText.indexOf("=")+1),r=e.responseText.indexOf(";");-1!==r&&(t=e.responseText.slice(e.responseText.indexOf("=")+1,r)),0!=t.length?document.querySelector("body").insertAdjacentHTML("beforeend",`<input type='hidden' name='csrf' id='csrf_token' content='${t}'>`):document.location.href="/"}}));
